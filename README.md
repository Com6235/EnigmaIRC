# EnigmaIRC
**Содержание:**
1. [О проекте](#p1)
    - [Что это такое?](#p1_1)
    - [Как это устроено](#p1_2)
2. [Как установить на сервер](#p2)
3. [Как настроить клиент](#p3)
4. [Установка из исходного кода *(для Linux)*](#p4)
   - [Сервер](#p4_1)
   - [Клиент](#p4_2)

<h2 id="p1">О проекте</h2>
<h3 id="p1_1">Что это такое?</h3>
EnigmaIRC - примитивный мессенджер для обмена сообщениями между небольшим количеством пользователей, использующее симметричное шифрование и рассчитаный на защищённый обмен информацией.

<h3 id="p1_2">Как это устроено</h3>
Главным аспектом EnigmaIRC является <u>ручной обмен ключами</u>, а также исключительно локальный процесс шифрования, при котором в сеть уходят только прошедшие этот процесс данные.

Пользователи сами настраивают сервер, что даёт им полный контроль над процессом работы, а так же возможность настроить мессенджер под себя *(для продвинутых пользователей)*

<h2 id="p2">Как установить на сервер</h2>
### Установка

С оффициального сайта или из релиза в GitHub установите архив с сервером под Linux и распакуйте его в удобном месте.  
Если у вас нет возможности визуально получить архив, то отправьте его на сервер по FTP или рассмотрите [вариант установки через исходники](#p4_1).

Перейдите в папку с распакованной программой в терминале и выполните следующую команду:
```
chmod u+rwx server
```

Без этой команды программа не запустится.

### Настройка

Далее отредактируйте конфиг, используя графический интерфейс или nano:

```
nano config.json
```

Первым делом измените публичный IP-адрес сервера и порт, который будете использовать:

```
"server_public_ip" : "127.0.0.1",
"port" : 80,
```

Настройте количество людей, которые могут общаться одновременно. Не рекомендуется использовать большие числа, так как это замедлит работу как сервера, так и клиента.

```
"session_count" : 2
```

### Запуск сервера

Теперь сервер можно запустить!

```
sudo ./server &
```

Если способ не сработал, рассмотрите [вариант установки через исходники](#p4_1).

<h2 id="p3">Как установить на клиент</h2>

### Установка

С оффициального сайта или из релиза в GitHub установите архив с клиентом под Linux и распакуйте его в удобном месте.

Перейдите в папку с распакованной программой в терминале и выполните следующую команду:
```
chmod u+rwx sender
chmod u+rwx listener
chmod u+rwx keygen
```

Без этой команды программа не запустится.

### Настройка

Далее сгенерируйте ключ при помощи keygen:

```
sudo ./keygen
```

Откройте и настройте `congig.json`:

```
nano config.json
```

В server_ip укажите ip и порт вашего сервера:

```
"server_ip": "ip:порт",
```

В MESSAGE_ENCRYPTION_KEY вставьте ваш ключ, полученный из keygen:

```
"MESSAGE_ENCRYPTION_KEY": "ключ_из_keygen",
```

Далее в оффлайн форме передайте все эти параметры вашему будущему собеседнику, чтобы у вас были одинаковые конфиги.

### Запуск

Программа разделена на 2 окна: окно для отправки сообщений и окно для их получения

В первом терминале запустите sender:
```
sudo ./sender
```

А во втором - listener:

```
sudo ./listener
```

Укажите в каждом окне никнейм и номер сессии. Номер сессии - это ваш временный id в этом чате. По разному id мессенджер отличает одного пользователя от другого.

В качестве номена сессии два собеседника должны ввести разные числа. Если вы выбрали сессию 0, то ваш друг должен выбрать любую доступную, кроме этой

Приятного использования!

<h1 id="p4">Установка из исходного кода</h1>
<h2 id="p4_1">Сервер</h2>
<h3>Установка всего необходимого</h3>

В качестве сервера может выступать как арендованый выделенный сервер, так и личных хост. Рекомендованой ОС для сервера является Debian версии 9 и выше, но подойдёт и любая другая система, которая поддерживает Python 3.9+.

Пример установки серверной части EnigmaIRC показана на примере Debian 11.

Обновите список доступных пакетов:

`sudo apt update && sudo apt upgrade --yes`

Установите Python, pip и git:

```
sudo apt install python3
sudo apt install python3-pip
sudo apt install git
```

Скопируйте к себе репозиторий EnigmaIRC:

```
git clone https://github.com/Dertfin3051/EnigmaIRC.git
```

Перейдите в папку с сервером EnigmaIRC и установите все нужные дополнения:

```
cd EnigmaIRC/server
pip install -r requirements.txt
```

<h3>Настройка конфига</h3>

Далее отредактируйте конфиг, используя графический интерфейс или nano:

```
nano config.json
```

Первым делом измените публичный IP-адрес сервера и порт, который будете использовать:

```
"server_public_ip" : "127.0.0.1",
"port" : 80,
```

Настройте количество людей, которые могут общаться одновременно. Не рекомендуется использовать большие числа, так как это замедлит работу как сервера, так и клиента.

```
"session_count" : 2
```

<h3>Запуск сервера</h3>

Теперь сервер можно запустить!

```
python3 server.py &
```

Если вы получили ошибку, связанную с неподдерживаемой кирилицей, то запустите файл `server_nc.py`

```
python3 server_nc.py &
```

*Знак `&` в конце нужен, чтобы процесс работал в фоне и не закрывался, когда вы отключаетесь от сервера*

Учтите, что на вашем сервере может быть предустановлен брендмауэр, который может блокировать входящие подключения.

<h2>Клиент</h2>
### Установка
Чтобы установить клиент EnigmaIRC на Linux, вам необходимо установить `Python` версии `3.9+`, а так же пакетный менеджер `pip`

Сначала обновите список пакетов:
```
sudo apt update 
sudo apt upgrade --yes
```

Далее установите Python 3, pip и git:
```
sudo apt install python3
sudo apt install python3-pip
sudo apt install git
```

Скопируйте к себе репозиторий EnigmaIRC:

```
git clone https://github.com/Dertfin3051/EnigmaIRC.git
```

Перейдите в папку с клиентом EnigmaIRC:

```
cd EnigmaIRC/client
```

**Все необходимые дополнения программа установит сама при первом запуске**

### Настройка

Далее сгенерируйте ключ при помощи `keygen.py`:

```
python3 keygen.py
```

Откройте и настройте `congig.json`:

```
nano config.json
```

В server_ip укажите ip и порт вашего сервера:

```
"server_ip": "ip:порт",
```

В MESSAGE_ENCRYPTION_KEY вставьте ваш ключ, полученный из keygen.py:

```
"MESSAGE_ENCRYPTION_KEY": "ключ_из_keygen",
```

Далее в оффлайн форме передайте все эти параметры вашему будущему собеседнику, чтобы у вас были одинаковые конфиги.

### Запуск

Программа разделена на 2 окна: окно для отправки сообщений и окно для их получения

В первом терминале запустите sender:
```
python3 sender.py
```

А во втором - listener:

```
python3 listener.py
```

Укажите в каждом окне никнейм и номер сессии. Номер сессии - это ваш временный id в этом чате. По разному id мессенджер отличает одного пользователя от другого.

В качестве номена сессии два собеседника должны ввести разные числа. Если вы выбрали сессию 0, то ваш друг должен выбрать любую доступную, кроме этой

Приятного использования!